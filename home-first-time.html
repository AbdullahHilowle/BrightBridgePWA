<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <meta name="description" content="BrightBridge - Welcome Home">
  <meta name="theme-color" content="#5B4B8A">
  
  <!-- iOS Support -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  
  <title>BrightBridge - Home</title>
  
  <link rel="stylesheet" href="styles.css">
</head>
<body class="full-height">
  
  <header class="gradient-header">
    <div class="header-content"></div>
  </header>
  
  <main class="container" style="flex: 1; padding-top: var(--spacing-lg);">
    
    <section class="welcome-section fade-in">
      <h1 class="text-center" id="welcomeMessage">
        Hi <span id="userName">User</span>,<br>
        welcome home!
      </h1>
    </section>
    
    <section class="mood-checkin mt-lg fade-in" style="animation-delay: 0.2s;">
      <h2 class="text-center mb-md">How are you feeling today?</h2>
      
      <div class="mood-selector" role="group" aria-label="Select your mood">
        <button 
          class="mood-btn happy" 
          onclick="selectMood('happy')"
          aria-label="Happy mood"
          data-mood="happy"
        >
          üòä
        </button>
        <button 
          class="mood-btn neutral" 
          onclick="selectMood('neutral')"
          aria-label="Neutral mood"
          data-mood="neutral"
        >
          üòê
        </button>
        <button 
          class="mood-btn sad" 
          onclick="selectMood('sad')"
          aria-label="Sad mood"
          data-mood="sad"
        >
          ‚òπÔ∏è
        </button>
      </div>
    </section>
    
    <section class="daily-journal mt-lg fade-in" style="animation-delay: 0.4s;">
      <h2 class="text-center mb-md">How was your day?</h2>
      
      <form id="dailyJournalForm" onsubmit="submitJournal(event)">
        <div class="form-group">
          <label for="dailyEntry" class="sr-only">Write about your day</label>
          <textarea 
            id="dailyEntry" 
            name="dailyEntry" 
            class="form-textarea" 
            placeholder="start typing..."
            rows="6"
            aria-label="Write about your day"
          ></textarea>
        </div>
        
        <button type="submit" class="btn btn-primary btn-large" style="width: 100%;">
          Continue to Dashboard
        </button>
      </form>
    </section>
    
  </main>
  
  <a href="https://www.weather.com" class="quick-exit" aria-label="Quick exit to weather website">
    quick exit
  </a>
  
  <script src="js/app.js"></script>
  <script>
    let selectedMood = null;
    
    window.addEventListener('load', () => {
      const username = localStorage.getItem('brightbridge_username') || 'User';
      document.getElementById('userName').textContent = username;
      
      document.body.style.opacity = '1';
    });
    
    function selectMood(mood) {
      selectedMood = mood;
      
      document.querySelectorAll('.mood-btn').forEach(btn => {
        btn.classList.remove('active');
      });

      const selectedBtn = document.querySelector(`[data-mood="${mood}"]`);
      selectedBtn.classList.add('active');
      
      const moodEntry = {
        mood: mood,
        timestamp: new Date().toISOString(),
        date: new Date().toLocaleDateString()
      };
      
      let moodHistory = JSON.parse(localStorage.getItem('brightbridge_mood_history') || '[]');
      moodHistory.push(moodEntry);
      
      localStorage.setItem('brightbridge_mood_history', JSON.stringify(moodHistory));
      
      selectedBtn.style.transform = 'scale(1.1)';
      setTimeout(() => {
        selectedBtn.style.transform = '';
      }, 200);
    }
    
    function submitJournal(event) {
      event.preventDefault();
      
      const journalEntry = document.getElementById('dailyEntry').value;
      
      if (journalEntry.trim()) {
        const entry = {
          content: journalEntry,
          timestamp: new Date().toISOString(),
          date: new Date().toLocaleDateString(),
          mood: selectedMood
        };
        
        let journalHistory = JSON.parse(localStorage.getItem('brightbridge_journal') || '[]');
        journalHistory.push(entry);
        
        localStorage.setItem('brightbridge_journal', JSON.stringify(journalHistory));
      }
      
      window.location.href = 'home.html';
    }
  </script>
  
  <style>
    body {
      opacity: 0;
      transition: opacity 0.5s ease;
      background-color: var(--white);
    }
    
    .gradient-header {
      min-height: 80px;
      border-radius: 0 0 var(--radius-lg) var(--radius-lg);
    }
    
    .welcome-section h1 {
      font-size: var(--font-size-lg);
      color: var(--text-dark);
      line-height: 1.4;
      font-weight: 600;
    }
    
    .mood-checkin h2,
    .daily-journal h2 {
      font-size: var(--font-size-md);
      font-weight: 600;
      color: var(--text-dark);
    }
    
    .mood-selector {
      padding: var(--spacing-md) 0;
    }
    
    .mood-btn {
      box-shadow: var(--shadow-md);
    }
    
    .form-textarea {
      background-color: var(--light-gray);
      border: 2px solid var(--light-gray);
      font-size: var(--font-size-sm);
      line-height: 1.6;
    }
    
    .form-textarea:focus {
      background-color: var(--white);
      border-color: var(--primary-purple);
    }
    
    .daily-journal {
      margin-bottom: var(--spacing-xl);
    }
    
    @media (max-width: 480px) {
      .welcome-section h1 {
        font-size: var(--font-size-md);
      }
      
      .mood-btn {
        width: 56px;
        height: 56px;
        font-size: 28px;
      }
    }
    
    @media (min-width: 481px) {
      .gradient-header {
        min-height: 100px;
      }
      
      .welcome-section h1 {
        font-size: var(--font-size-xl);
      }
    }
  </style>
  
</body>
</html>